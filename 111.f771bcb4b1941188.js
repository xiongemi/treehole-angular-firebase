"use strict";(self.webpackChunktreehole_angular_firebase=self.webpackChunktreehole_angular_firebase||[]).push([[111],{111:(G,u,e)=>{e.r(u),e.d(u,{AddPostModule:()=>Y});var r=e(3075),l=e(240),S=e(4466),g=e(9516),T=e(2198),Z=e(8726),p=e(6162);let f=(()=>{class n{constructor(o,a,i,c){this.title=o,this.message=a,this.uuid=i,this.language=c}}return n.type="[Add Post] Save",n})();var t=e(5e3),h=e(9808),x=e(3285),m=e(4546),z=e(1894),y=e(1047),L=e(6042),C=e(2643),E=e(2683),F=e(3087),I=e(2466);function J(n,s){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ERROR.MAXLENGTH")," "))}function R(n,s){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ERROR.MINLENGTH")," "))}function N(n,s){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ERROR.REQUIRED")," "))}function U(n,s){if(1&n&&(t.YNc(0,J,3,3,"ng-container",12),t.YNc(1,R,3,3,"ng-container",12),t.YNc(2,N,3,3,"ng-container",12)),2&n){const o=s.$implicit;t.Q6J("ngIf",o.hasError("maxlength")),t.xp6(1),t.Q6J("ngIf",o.hasError("minlength")),t.xp6(1),t.Q6J("ngIf",o.hasError("required"))}}const Q=[{path:"",component:(()=>{class n{constructor(o,a,i){this.store=o,this.location=a,this.modalService=i,this.addForm=new r.cw({title:new r.NI(null,[r.kI.required,r.kI.minLength(10),r.kI.maxLength(200)]),message:new r.NI(null,[r.kI.required,r.kI.minLength(50),r.kI.maxLength(1e3)])}),this.isLoading=!1}savePost(){(0,Z.E)(this.addForm),this.addForm.valid&&(this.isLoading=!0,this.store.dispatch(new f(this.addForm.value.title,this.addForm.value.message,this.store.selectSnapshot(p.pB),this.store.selectSnapshot(p.G3))).subscribe(()=>{this.location.back(),this.isLoading=!1}))}onCancel(){this.addForm.dirty?this.modalService.cancelEditing().pipe((0,T.h)(Boolean)).subscribe(()=>{this.location.back()}):this.location.back()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(l.yh),t.Y36(h.Ye),t.Y36(x.Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-post-home"]],decls:24,vars:24,consts:[["nz-form","",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","title",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["type","text","nz-input","","minlength","10","maxlength","200","formControlName","title","id","title"],["nzFor","message","nzRequired","",3,"nzSm","nzXs"],["rows","5","nz-input","","id","message","formControlName","message","minlength","50","maxlength","1000"],[1,"justify-center"],["nz-button","","nzSize","large","type","button",1,"mr4",3,"click"],["nz-icon","","nzType","left"],["nz-button","","nzSize","large","nzType","primary","type","submit",3,"nzLoading"],["nz-icon","","nzType","save"],["inputErrorsTemplate",""],[4,"ngIf"]],template:function(o,a){if(1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return a.savePost()}),t.TgZ(1,"nz-form-item")(2,"nz-form-label",1),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"nz-form-control",2),t._UZ(6,"input",3),t.qZA()(),t.TgZ(7,"nz-form-item")(8,"nz-form-label",4),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"nz-form-control",2),t._UZ(12,"textarea",5),t.qZA()(),t.TgZ(13,"nz-form-item",6)(14,"button",7),t.NdJ("click",function(){return a.onCancel()}),t._UZ(15,"i",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"button",9),t._UZ(19,"i",10),t._uU(20),t.ALo(21,"translate"),t.qZA()()(),t.YNc(22,U,3,3,"ng-template",null,11,t.W1O)),2&o){const i=t.MAs(23);t.Q6J("formGroup",a.addForm),t.xp6(2),t.Q6J("nzSm",6)("nzXs",24),t.xp6(1),t.hij(" ",t.lcZ(4,16,"ADD.TITLE")," "),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",i),t.xp6(3),t.Q6J("nzSm",6)("nzXs",24),t.xp6(1),t.hij(" ",t.lcZ(10,18,"ADD.MESSAGE")," "),t.xp6(2),t.Q6J("nzSm",14)("nzXs",24)("nzErrorTip",i),t.xp6(5),t.hij(" ",t.lcZ(17,20,"ADD.CANCEL")," "),t.xp6(2),t.Q6J("nzLoading",a.isLoading),t.xp6(2),t.hij(" ",t.lcZ(21,22,"ADD.SUBMIT")," ")}},directives:[r._Y,r.JL,m.Lr,r.sg,z.SK,m.Nx,z.t3,m.iK,m.Fd,y.Zp,r.Fj,r.wO,r.nD,r.JJ,r.u,L.ix,C.dQ,E.w,F.Ls,h.O5],pipes:[I.X$],encapsulation:2}),n})()}];let H=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.Bz.forChild(Q)],g.Bz]}),n})();var M=e(5254),D=e(1995);let A=(()=>{class n{constructor(o){this.firestore=o}savePost(o,a,i,c){const B={title:o,message:a,language:c,createdAt:new Date,likesCount:0,commentsCount:0,dislikesCount:0,uuid:i};return(0,M.D)(this.firestore.collection("posts").add(B))}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(D.ST))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var v=e(655),j=e(2994),X=e(7221),P=e(5294);let d=class{constructor(s){this.addPostService=s}saveAddedPost(s,o){return this.addPostService.savePost(o.title,o.message,o.uuid,o.language).pipe((0,j.b)(()=>{s.dispatch(new P.t)}),(0,X.K)(a=>{throw s.dispatch(new P.y),a}))}};d.\u0275fac=function(s){return new(s||d)(t.LFG(A))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac}),(0,v.gn)([(0,l.aU)(f)],d.prototype,"saveAddedPost",null),d=(0,v.gn)([(0,l.ZM)({name:"addPost",defaults:null})],d);let Y=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[A],imports:[[S.m,H,r.u5,r.UX,l.$l.forFeature([d])]]}),n})()}}]);